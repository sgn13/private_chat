(this["webpackJsonpchatsystem-frontend"]=this["webpackJsonpchatsystem-frontend"]||[]).push([[0],{122:function(e,t,c){},123:function(e,t,c){},159:function(e,t,c){},206:function(e,t,c){"use strict";c.r(t);var n,a,s,r=c(2),o=c(0),i=c.n(o),l=c(32),j=c.n(l),u=(c(121),c(122),c(123),c(33)),b=c(11),d=c(8),O=c(39),h=(c(151),c(159),c(214)),p=(c(164),c(113),c(114),c(212)),f=c(209),m=c(42),x=c.n(m),v=c(53),g=(c(211),c(213),c(41)),S=c.n(g),y=(c(111),function(e){var t=e.pm;return Object(r.jsxs)("div",{children:[t,"hy"]})}),C=function(e){var t,c,a,s=e.location,i=Object(b.e)(),l=Object(o.useState)(""),j=Object(d.a)(l,2),u=(j[0],j[1],Object(o.useState)("")),m=Object(d.a)(u,2),x=m[0],v=m[1],g=Object(o.useState)([]),S=Object(d.a)(g,2),C=(S[0],S[1],Object(o.useState)("")),E=Object(d.a)(C,2),I=(E[0],E[1],Object(o.useState)("")),N=Object(d.a)(I,2),w=(N[0],N[1],Object(o.useState)()),P=Object(d.a)(w,2),L=(P[0],P[1],Object(o.useState)("sdfsdfasdfsdfsd")),k=Object(d.a)(L,2),B=k[0],T=k[1],_=Object(o.useState)(null===s||void 0===s||null===(t=s.userProps)||void 0===t?void 0:t.user),G=null===(c=s.userProps)||void 0===c?void 0:c.fullname,J=(null===(a=s.userProps)||void 0===a||a.email,"http://localhost:4000");Object(o.useEffect)((function(){s.userProps||i.push("/userList")}),[]),Object(o.useEffect)((function(){n=O.io.connect(J)}),[J]);return Object(o.useEffect)((function(){n.on("private",(function(e){T(e.message),console.log(e,"userList")}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(y,{pm:B}),Object(r.jsxs)("div",{className:"container mt-5",children:[Object(r.jsx)("h4",{children:"Chat App"}),Object(r.jsxs)(h.a,{border:"secondary",style:{width:"30rem"},className:"p-3",children:[Object(r.jsx)(h.a.Header,{children:G}),Object(r.jsx)(h.a.Body,{}),Object(r.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(),n.emit("private",{to:_,message:x})},children:[Object(r.jsxs)(p.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)("input",{type:"text",placeholder:"id",value:_,readOnly:!0}),Object(r.jsx)(p.a.Control,{type:"text",placeholder:"Message..",value:x,onChange:function(e){return v(e.target.value)}})]}),Object(r.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})]})]})]})},E=c(210),I=Object(o.createContext)(),N=function(e){var t=e.children,c=Object(o.useState)({token:localStorage.getItem("token"),user:JSON.parse(localStorage.getItem("user"))}),n=Object(d.a)(c,2),a=n[0],s=n[1];return Object(r.jsx)(I.Provider,{value:{uso:[a,s]},children:t})},w=function(){var e=Object(o.useState)(""),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(o.useState)(""),s=Object(d.a)(a,2),i=s[0],l=s[1],j=Object(o.useState)(""),u=Object(d.a)(j,2),O=u[0],h=u[1],m=Object(o.useState)(!1),x=Object(d.a)(m,2),v=x[0],g=x[1],y=Object(o.useState)(!1),C=Object(d.a)(y,2),N=C[0],w=C[1],P=Object(d.a)(Object(o.useContext)(I).uso,2),L=(P[0],P[1]),k=Object(b.e)();return Object(r.jsx)("div",{className:"container p-5 mt-5",children:Object(r.jsxs)("div",{className:"col-lg-5 offset-md-4 login mt-5",children:[v?Object(r.jsx)(E.a,{variant:"danger",children:O}):null,N&&Object(r.jsx)(E.a,{variant:"success",children:"Success! You are logged in."}),Object(r.jsx)("h3",{className:"text-center my-5",children:"LOGIN"}),Object(r.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(),S()({url:"http://localhost:4000/users/login/",method:"POST",data:{email:c,password:i},headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data,c=t.token,n=t.user;localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(n)),L({token:localStorage.getItem("token"),user:JSON.parse(localStorage.getItem("user"))}),w(!0),g(!1),k.push("/userList")})).catch((function(e){var t;g(!0),h(null===(t=e.response)||void 0===t?void 0:t.data.msg)}))},children:[Object(r.jsxs)(p.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)(p.a.Label,{children:"Email address"}),Object(r.jsx)(p.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:c,onChange:function(e){return n(e.target.value)}})]}),Object(r.jsxs)(p.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(p.a.Label,{children:"Password"}),Object(r.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(r.jsx)(f.a,{variant:"primary",type:"submit",children:"Login"})]})]})})},P=c(115),L=function(e){var t=e.list,c=e.pm,n=Object(o.useState)(""),s=Object(d.a)(n,2),i=s[0],l=s[1],j=Object(o.useState)([]),u=Object(d.a)(j,2),b=(u[0],u[1]),m=Object(o.useState)(""),x=Object(d.a)(m,2),v=(x[0],x[1]),g="http://localhost:4000";Object(o.useEffect)((function(){a=O.io.connect(g)}),[g]),Object(o.useEffect)((function(){a.on("private_receive",(function(e){v(e.messageModal)}))}),[]),Object(o.useEffect)((function(){a.on("private_receive",(function(e){b((function(t){return[].concat(Object(P.a)(t),[e.message])}))}))}),[]);return Object(r.jsx)("div",{children:Object(r.jsxs)(h.a,{border:"secondary",style:{width:"30rem"},className:"p-3",children:[Object(r.jsx)(h.a.Header,{children:t.fullname}),Object(r.jsx)(h.a.Body,{children:c}),Object(r.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(),a.emit("private",{to:t._id,message:i})},children:[Object(r.jsxs)(p.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)("input",{type:"text",placeholder:"id",value:t._id,readOnly:!0}),Object(r.jsx)(p.a.Control,{type:"text",placeholder:"Message..",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(r.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},k=function(e){var t=e.list,c=e.pm,n=t.fullname,a=t.email,s=t._id;return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsxs)(h.a,{className:"my-5",children:[Object(r.jsx)(h.a.Header,{as:"h5",children:n}),Object(r.jsxs)(h.a.Body,{children:[Object(r.jsx)(h.a.Title,{children:a}),Object(r.jsxs)(h.a.Text,{children:["Ping me up ",s,Object(r.jsx)(f.a,{variant:"secondary",style:{float:"right"},onClick:function(e){return console.log(s)},children:"Message"})]})]})]}),Object(r.jsx)(L,{list:t,pm:c})]})},B=function(){var e=Object(o.useState)([]),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(o.useState)(""),i=Object(d.a)(a,2),l=i[0],j=i[1],u=Object(d.a)(Object(o.useContext)(I).uso,2),b=u[0],h=(u[1],b.user.id),p="http://localhost:4000";return Object(o.useEffect)(Object(v.a)(x.a.mark((function e(){var t,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({url:"http://localhost:4000/users/",method:"GET",headers:{"Content-Type":"application/json"}});case 2:t=e.sent,c=t.data,n(c);case 5:case"end":return e.stop()}}),e)}))),[]),Object(o.useEffect)((function(){(s=O.io.connect(p)).emit("user_connected",h)}),[p]),Object(o.useEffect)((function(){s.on("private_receive",(function(e){j(e.message),console.log(e,"userList")}))}),[l]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{className:"text-center",style:{color:"green"},children:b.user.fullname}),c.map((function(e){return Object(r.jsx)(k,{list:e,pm:l},e._id)}))]})},T=function(){return Object(r.jsxs)(u.a,{children:[Object(r.jsx)(b.a,{path:"/",exact:!0,component:w}),Object(r.jsx)(b.a,{path:"/userList",component:B}),Object(r.jsx)(b.a,{path:"/chat",component:C})]})};var _=function(){return Object(r.jsx)(N,{children:Object(r.jsx)(T,{})})},G=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,215)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};j.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(_,{})}),document.getElementById("root")),G()}},[[206,1,2]]]);
//# sourceMappingURL=main.2d8a3442.chunk.js.map